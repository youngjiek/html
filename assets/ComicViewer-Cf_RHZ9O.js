import{_ as R,b as g,d as V,w as F,e as S,c as r,a as s,f as T,v as j,g as $,F as y,r as A,h as q,o as i}from"./index-B4to0h6c.js";const J=async(m,n)=>{console.log(`ğŸš€ å¼€å§‹åŠ è½½ ${n} å¼ å›¾ç‰‡, åˆå§‹ URL: ${m}`);let o=[],v=m,a=0;for(let c=1;c<=n;c++){if(a>=3){console.log("âŒ å¤±è´¥æ¬¡æ•°è¾¾åˆ° 3 æ¬¡ï¼Œåœæ­¢åŠ è½½");break}const u=await I(v,1);u?(console.log(`âœ… åŠ è½½æˆåŠŸ: ${u}`),o.push(u),v=u,a=0):(console.log(`âš ï¸ åŠ è½½å¤±è´¥ (ç¬¬ ${a+1} æ¬¡)`),a++)}return o.length===0&&alert("âŒ æ— æ³•åŠ è½½æ›´å¤šå›¾ç‰‡ï¼Œè¯·æ£€æŸ¥æ˜¯å¦ç»“æŸï¼"),console.log(`ğŸ‰ åŠ è½½å®Œæˆ, æˆåŠŸåŠ è½½ ${o.length} å¼ å›¾ç‰‡:`,o),o},I=async(m,n)=>{console.log("ğŸ” åŸå§‹ URL:",m);const o=m.match(/\/([^\/]+)\.([a-zA-Z0-9]+)$/);if(!o)return console.log("âŒ æ— æ³•è§£æ URL æ–‡ä»¶å"),null;let v=o[1],a=o[2].toLowerCase();const c=m.replace(o[0],"/");console.log("ğŸ“Œ è§£æå‡ºçš„æ–‡ä»¶å:",v),console.log("ğŸ“Œ è§£æå‡ºçš„æ‰©å±•å:",a),console.log("ğŸ“Œ è§£æå‡ºçš„ Base URL:",c);const u=[...v.matchAll(/\d+/g)].map(p=>p[0]);if(u.length===0)return console.log("âŒ æœªæ‰¾åˆ°æ•°å­—éƒ¨åˆ†ï¼Œæ— æ³•æ¨ç®—"),null;const f=u.at(-1),h=String(parseInt(f,10)+n).padStart(f.length,"0"),k=v.replace(f,h);let d=["png","jpg","webp"];d=d.filter(p=>p!==a),d.unshift(a),console.log(`ğŸ“ å°è¯•æ ¼å¼é¡ºåº: ${d.join(" -> ")}`);for(let p of d){let w=`${c}${k}.${p}`;if(console.log(`ğŸ”„ å°è¯•åŠ è½½å›¾ç‰‡: ${w}`),await O(w))return console.log(`âœ… å›¾ç‰‡åŠ è½½æˆåŠŸ: ${w}`),w}return console.log("âŒ æ‰€æœ‰å°è¯•éƒ½å¤±è´¥ï¼Œæœªæ‰¾åˆ°å¯ç”¨å›¾ç‰‡"),null},O=m=>new Promise(n=>{const o=new Image;o.src=m,o.onload=()=>n(!0),o.onerror=()=>n(!1)}),z={class:"comic-viewer"},D={class:"cover-wrapper"},P=["src"],Z={key:1,class:"input-container"},G={key:0,class:"extra-buttons"},H={class:"image-list"},K=["src","onError"],Q={key:1,class:"placeholder"},W={class:"floating-buttons"},X={class:"dropdown"},Y={key:0,class:"dropdown-menu"},ee={class:"dropdown"},te={key:0,class:"dropdown-menu"},oe={__name:"ComicViewer",setup(m){const n=g([]),o=g(""),v=g(""),a=g(!1),c=g(!1),u=g(!1),f=g(!1),h=q(),k=g({});V(()=>{h.query.id&&(console.log("è·å–å‚æ•°:",h.query.id),u.value=!0,f.value=!0);const t=localStorage.getItem("lastComic");t&&(k.value=t),k.value&&(o.value=k.value,n.value.push(k.value)),document.addEventListener("click",d)}),F(()=>n.value.length,t=>{console.log("=============== imageUrls é•¿åº¦å˜åŒ–:",t),t>10&&(f.value=!0)}),S(()=>{document.removeEventListener("click",d)});const d=t=>{if(t.target.tagName==="BUTTON"){const e=t.target;e.disabled=!0,setTimeout(()=>{e.disabled=!1},1e3)}},p=()=>{if(!o.value.trim()){alert("è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡åœ°å€ï¼");return}const t=new Image;t.src=o.value,t.onload=()=>{n.value=[],n.value.push(o.value),localStorage.setItem("lastComic",o.value)},t.onerror=()=>{alert("âŒ æ— æ³•åŠ è½½å›¾ç‰‡ï¼Œè¯·æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®ï¼")}},w=()=>{alert("ğŸ“Œ å·²æ”¶è—")},U=()=>{alert("ğŸ‘ å·²ç‚¹èµï¼")},x=()=>{alert("ğŸ‘ å·²è¸©ï¼")},E=()=>{alert("ğŸ’¬ è¿›å…¥è¯„è®ºåŒºï¼")},_=async t=>{a.value=!1,c.value=!1;const e=n.value.at(-1);if(!e)return;const l=await I(e,t);l?n.value.push(l):console.log("âŒ æ— æ³•åŠ è½½ä¸‹ä¸€å¼ å›¾ç‰‡")},b=async t=>{a.value=!1,c.value=!1;const e=n.value.at(-1);if(!e)return;const l=await J(e,t);n.value.push(...l)},L=()=>{a.value=!a.value,c.value=!1},N=()=>{c.value=!c.value,a.value=!1},B=t=>{const e=n.value[t],l=M(e);l?n.value[t]=e.replace(/\.[^/.]+$/,l):(console.log(`âŒ å›¾ç‰‡åŠ è½½å¤±è´¥: ${e}`),n.value[t]=null)},M=t=>{const e=[".png",".jpg",".webp"],l=t.match(/\.[^/.]+$/)[0];let C=e.indexOf(l);return C===-1?null:e[(C+1)%e.length]};return(t,e)=>(i(),r("div",z,[s("div",D,[v.value?(i(),r("img",{key:0,src:v.value,alt:"é¢„è§ˆå›¾ç‰‡"},null,8,P)):(i(),r("div",Z,[T(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),type:"text",placeholder:"è¯·è¾“å…¥å›¾ç‰‡åœ°å€",autocomplete:"off",spellcheck:"false"},null,512),[[j,o.value]]),s("button",{onClick:p},"é¢„è§ˆ"),f.value?(i(),r("button",{key:0,onClick:w},"â­")):$("",!0)]))]),u.value?(i(),r("div",G,[s("button",{onClick:U},"ğŸ‘"),s("button",{onClick:x},"ğŸ‘"),s("button",{onClick:E},"ğŸ’¬")])):$("",!0),s("div",H,[(i(!0),r(y,null,A(n.value,(l,C)=>(i(),r(y,{key:C},[l?(i(),r("img",{key:0,src:l,onError:le=>B(C),alt:"æ¼«ç”»å›¾ç‰‡"},null,40,K)):(i(),r("div",Q,"âŒ åŠ è½½å¤±è´¥"))],64))),128))]),s("div",W,[s("div",X,[s("button",{onClick:L},"åŠ è½½"),a.value?(i(),r("ul",Y,[s("li",{onClick:e[1]||(e[1]=l=>b(10))},"åŠ è½½ 10"),s("li",{onClick:e[2]||(e[2]=l=>b(50))},"åŠ è½½ 50"),s("li",{onClick:e[3]||(e[3]=l=>b(100))},"åŠ è½½ 100")])):$("",!0)]),s("div",ee,[s("button",{onClick:N},"è·³è·ƒ"),c.value?(i(),r("ul",te,[s("li",{onClick:e[4]||(e[4]=l=>_(-10))},"è·³è·ƒ -10"),s("li",{onClick:e[5]||(e[5]=l=>_(10))},"è·³è·ƒ 10"),s("li",{onClick:e[6]||(e[6]=l=>_(50))},"è·³è·ƒ 50"),s("li",{onClick:e[7]||(e[7]=l=>_(100))},"è·³è·ƒ 100")])):$("",!0)])])]))}},se=R(oe,[["__scopeId","data-v-c0c27170"]]);export{se as default};
